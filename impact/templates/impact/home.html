{% extends "impact/base.html" %}

{% load static %}

{% block title %}Fighting Fast Fashion{% endblock %}

{% block content %}

<section class="hero hero-video">
    <!-- Background video -->
    <div class="hero-video-bg">
        <video
            class="hero-video-tag"
            autoplay
            muted
            loop
            playsinline
            poster="{% static 'impact/imgs/clothes-on-rack2.jpg' %}">
            <source src="{% static 'impact/videos/beach-background.mp4' %}" type="video/mp4">
            <!-- Fallback text -->
            Your browser does not support the video tag.
        </video>
    </div>

    <!-- Overlay with text and card -->
    <div class="hero-overlay">
        <div class="hero-inner hero-overlay-inner">
            <div class="hero-text">
                <p class="hero-tagline">Fast fashion’s hidden environmental cost</p>

                <h1 class="hero-title">
                    A clear, data-driven look at how fast fashion impacts water,
                    waste, and the planet.
                </h1>

                <p class="hero-subtext">
                    Every year, the fashion industry produces over 100 billion garments,
                    relying heavily on water-intensive farming, fossil-fuel-based fibers,
                    and rapid production cycles that generate massive waste. This project
                    turns those impacts into clear, visual numbers so you can see what is
                    happening behind the clothes we buy.
                </p>

                <div class="hero-buttons">
                    <a href="{% url 'problem' %}#headline" class="btn primary">
                        Explore the data
                    </a>
                    <a href="{% url 'solutions' %}" class="btn ghost">
                        What you can do
                    </a>
                </div>
            </div>

            <aside class="hero-card hero-overlay-card">
                <p class="hero-card-label">Guiding question</p>
                <p class="hero-card-text">
                    How do fast fashion materials contribute to environmental impact,
                    and what realistic actions can individuals take?
                </p>
            </aside>
        </div>
    </div>
</section>

<!-- STRIP SECTION -->
<section class="strip">
    <div class="strip-inner">
        <h2 class="strip-title">A global industry, a global footprint</h2>
        <p class="strip-text">
            Cotton, polyester, viscose: fast fashion relies on materials with heavy resource demands.
            From water use to textile waste, this overview highlights the scale of the issue.
        </p>
    </div>
</section>

<section class="live-water-section">
    <div class="live-water-inner">
        <h2 class="live-water-title">Live Water Use · Fashion Industry</h2>
        <p class="live-water-sub">Updated every second</p>

        <div class="live-water-grid">
            <!-- Card 1: liters -->
            <article class="live-water-card">
                <p class="live-water-label">Liters used this year</p>
                <p class="live-water-value">
                    <span id="waterYearLitersDisplay">0</span>
                </p>
                <p class="live-water-note">Total water flowing through the fashion and textile system.</p>
            </article>

            <!-- Card 2: bathtubs -->
            <article class="live-water-card">
                <p class="live-water-label">Bathtubs of water</p>
                <p class="live-water-value">
                    <span id="waterYearBathtubsDisplay">0</span>
                </p>
                <p class="live-water-note">Assuming about 150 liters per full bathtub.</p>
            </article>

            <!-- Card 3: 1-L bottles -->
            <article class="live-water-card">
                <p class="live-water-label">1-L bottles</p>
                <p class="live-water-value">
                    <span id="waterYearBottlesDisplay">0.0</span> B
                </p>
                <div class="live-water-bottle-bar">
                    <div class="live-water-bottle-track">
                        <div class="live-water-bottle-fill">
                            <div class="live-water-bottle-icons">
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                            </div>
                        </div>
                    </div>
                    <p class="live-water-note">Visualized as single-liter water bottles.</p>
                </div>
                
            </article>
        </div>

        <p class="live-water-footnote">
            Based on global textile industry estimates (≈93 billion cubic meters annually).
            This counter converts that to liters per second and multiplies by the time since
            January 1st. It illustrates scale rather than providing an exact real-time reading.
        </p>
    </div>
</section>

<!-- INFO CARDS -->
<section class="section">
    <div class="section-inner">
        <h2 class="section-heading">What you will find here</h2>

        <div class="card-grid three">
            <div class="info-card">
                <h3>Key statistics</h3>
                <p>
                    A small set of headline numbers showing water use, emissions, and textile waste
                    by common fashion materials.
                </p>
            </div>

            <div class="info-card">
                <h3>Two clear visuals</h3>
                <p>
                    Simple charts comparing fibers and showing how waste and production changed
                    over time.
                </p>
            </div>

            <div class="info-card">
                <h3>Practical solutions</h3>
                <p>
                    Realistic, affordable actions for students and communities, plus a fairness
                    and ethics note.
                </p>
            </div>
        </div>
    </div>
</section>

<script>
    function setYearProgress() {
        const now = new Date();
    
        // Start of this year (Jan 1, 00:00)
        const startOfYear = new Date(now.getFullYear(), 0, 1);
    
        // Start of next year (Jan 1 next year, 00:00)
        const startOfNextYear = new Date(now.getFullYear() + 1, 0, 1);
    
        const elapsedMs = now - startOfYear;
        const totalMs = startOfNextYear - startOfYear;
    
        let progress = (elapsedMs / totalMs) * 100;
    
        console.log("Year progress = ", progress);  // debug
    
        // Clamp to 0–100
        if (progress < 0) progress = 0;
        if (progress > 100) progress = 100;
    
        // Write into the CSS variable on :root (html element)
        document.documentElement.style.setProperty("--water-progress", progress);
    }
    
    // Run once when the page is ready
    document.addEventListener("DOMContentLoaded", setYearProgress);
    </script>
    
{% endblock %}
