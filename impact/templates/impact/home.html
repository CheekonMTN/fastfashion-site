{% extends "impact/base.html" %}

{% load static %}

{% block title %}Fighting Fast Fashion{% endblock %}

{% block content %}

<section class="hero hero-video">
    <!-- Background video -->
    <div class="hero-video-bg">
        <video
            class="hero-video-tag"
            autoplay
            muted
            loop
            playsinline
            <source src="{% static 'impact/videos/beach-background.mp4' %}" type="video/mp4">
            <!-- Fallback text -->
            Your browser does not support the video tag.
        </video>
    </div>

    <!-- Overlay with text and card -->
    <div class="hero-overlay">
        <div class="hero-inner hero-overlay-inner">
            <div class="hero-text">
                <p class="hero-tagline">Fast fashion's hidden environmental cost</p>

                <h1 class="hero-title">
                    A clear, data-driven look at how fast fashion impacts water,
                    waste, and the planet.
                </h1>
            </div>

                <div class="hero-buttons">
                <a href="#calculator" class="btn pill">
                    Calculate Your Impact
                </a>
                <a href="#problem" class="btn pill">
                        Explore the data
                    </a>
            </div>
        </div>
    </div>
</section>

<!-- STRIP SECTION -->


<!-- PERSONAL IMPACT CALCULATOR -->
<section id="calculator" class="section section-calculator section-anchor-offset">
    <div class="section-inner">
        <h2 class="section-heading">Calculate Your Impact</h2>
        <p class="section-text">
            Start by seeing how your clothing choices add up. Enter your annual purchases to discover your personal 
            water footprint, carbon emissions, and waste contribution.
        </p>
        
        <div class="calculator-container">
            <div class="calculator-inputs">
                <div class="calc-mode-toggle">
                    <button class="calc-mode-btn active" data-mode="simple">Simple</button>
                    <button class="calc-mode-btn" data-mode="detailed">Detailed</button>
                </div>
                
                <!-- Simple Mode -->
                <div id="simple-mode" class="calc-mode-content active">
                    <div class="calc-input-group">
                        <label for="items-per-year">How many clothing items do you buy per year?</label>
                        <input type="number" id="items-per-year" min="0" max="500" value="20" step="1">
                        <span class="calc-hint">Average: 20-30 items per year</span>
                    </div>
                    
                    <div class="calc-input-group">
                        <label for="material-type">Primary material type</label>
                        <select id="material-type">
                            <option value="cotton">Cotton</option>
                            <option value="polyester">Polyester</option>
                            <option value="rayon">Rayon</option>
                            <option value="mixed">Mixed (average)</option>
                        </select>
                    </div>
                </div>
                
                <!-- Detailed Mode -->
                <div id="detailed-mode" class="calc-mode-content">
                    <div class="calc-input-group">
                        <label for="shirts">T-shirts & Shirts</label>
                        <input type="number" id="shirts" min="0" max="200" value="0" step="1">
                    </div>
                    <div class="calc-input-group">
                        <label for="pants">Pants & Jeans</label>
                        <input type="number" id="pants" min="0" max="200" value="0" step="1">
                    </div>
                    <div class="calc-input-group">
                        <label for="dresses">Dresses & Skirts</label>
                        <input type="number" id="dresses" min="0" max="200" value="0" step="1">
                    </div>
                    <div class="calc-input-group">
                        <label for="shoes">Shoes & Footwear</label>
                        <input type="number" id="shoes" min="0" max="200" value="0" step="1">
                    </div>
                    <div class="calc-input-group">
                        <label for="outerwear">Jackets & Outerwear</label>
                        <input type="number" id="outerwear" min="0" max="200" value="0" step="1">
                    </div>
                    <div class="calc-input-group">
                        <label for="accessories">Accessories (bags, hats, etc.)</label>
                        <input type="number" id="accessories" min="0" max="200" value="0" step="1">
                    </div>
                    <div class="calc-input-group">
                        <label for="material-type-detailed">Primary material type</label>
                        <select id="material-type-detailed">
                            <option value="cotton">Cotton</option>
                            <option value="polyester">Polyester</option>
                            <option value="rayon">Rayon</option>
                            <option value="mixed">Mixed (average)</option>
                        </select>
                    </div>
                </div>
                
                <button id="calculate-btn" class="btn-calculate">Calculate My Impact</button>
            </div>
            
            <div id="calculator-results" class="calculator-results" style="display: none;">
                <h3 class="results-title">Your Annual Impact</h3>
                
                <!-- Comparison to Average -->
                <div class="results-comparison-banner" id="comparison-banner">
                    <div class="comparison-icon">üìä</div>
                    <div class="comparison-text">
                        <strong id="comparison-title">Compared to average</strong>
                        <span id="comparison-details"></span>
                    </div>
                </div>
                
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-icon">üíß</div>
                        <div class="result-value" id="water-result">0</div>
                        <div class="result-label">Liters of water</div>
                        <div class="result-comparison" id="water-comparison"></div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">üåç</div>
                        <div class="result-value" id="co2-result">0</div>
                        <div class="result-label">kg CO‚ÇÇ emissions</div>
                        <div class="result-comparison" id="co2-comparison"></div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-icon">üóëÔ∏è</div>
                        <div class="result-value" id="waste-result">0</div>
                        <div class="result-label">kg textile waste</div>
                        <div class="result-comparison" id="waste-comparison"></div>
                    </div>
                </div>
                
                <div class="results-tip">
                    <p><strong>üí° Tip:</strong> Extending the life of your clothes by just 9 months can reduce your environmental impact by 20-30%.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="live-water-section">
    <div class="live-water-inner">
        <h2 class="live-water-title">Live Water Use ¬∑ Fashion Industry</h2>
        <p class="live-water-sub">Updated every second</p>

        <div class="live-water-grid">
            <!-- Card 1: liters -->
            <article class="live-water-card">
                <p class="live-water-label">Liters used this year</p>
                <p class="live-water-value">
                    <span id="waterYearLitersDisplay">0</span>
                </p>
                <p class="live-water-note">Total water flowing through the fashion and textile system.</p>
            </article>

            <!-- Card 2: bathtubs -->
            <article class="live-water-card">
                <p class="live-water-label">Bathtubs of water</p>
                <p class="live-water-value">
                    <span id="waterYearBathtubsDisplay">0</span>
                </p>
                <p class="live-water-note">Assuming about 150 liters per full bathtub.</p>
            </article>

            <!-- Card 3: 1-L bottles -->
            <article class="live-water-card">
                <p class="live-water-label">1-L bottles</p>
                <p class="live-water-value">
                    <span id="waterYearBottlesDisplay">0.0</span> B
                </p>
                <div class="live-water-bottle-bar">
                    <div class="live-water-bottle-track">
                        <div class="live-water-bottle-fill">
                            <div class="live-water-bottle-icons">
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                                <div class="live-bottle"></div>
                            </div>
                        </div>
                    </div>
                    <p class="live-water-note">Visualized as single-liter water bottles.</p>
                </div>
                
            </article>
        </div>

        <p class="live-water-footnote">
            Based on global textile industry estimates (‚âà93 billion cubic meters annually).
            This counter converts that to liters per second and multiplies by the time since
            January 1st. It illustrates scale rather than providing an exact real-time reading.
        </p>
    </div>
</section>

<!-- PROBLEM SECTION -->
<section id="problem" class="section section-problem section-anchor-offset">
    <div class="section-inner">
        <h2 class="section-heading">The Problem</h2>
        <p class="section-text" style="text-align: center; max-width: 800px; margin: 0 auto 40px;">
                    Fast fashion depends on low-cost fibers that require large amounts of water, energy,
                    and chemicals. Below you'll find headline statistics drawn from public reports, plus
                    charts that put the scale of the problem into context.
                </p>
        
        <!-- Headline Statistics -->
        <section id="headline" class="section alt">
            <div class="section-inner">
                <h2 class="subheading">Headline Numbers</h2>
                <p class="section-text">
                    These values are rounded estimates. They are meant to show scale, not exact predictions
                    for every brand or garment. The numbers below represent the global impact of the fashion industry.
                </p>
        
                <div class="stats-grid">
                    {% for stat in stats %}
                    <article class="stat-card">
                        <p class="stat-title">{{ stat.title }}</p>
                        <p class="stat-value">{{ stat.value }} {{ stat.unit }}</p>
                        <p class="stat-desc">{{ stat.description }}</p>
                        {% if stat.source %}
                            <p class="stat-source">Source: {{ stat.source }}</p>
                        {% endif %}
                    </article>
                    {% empty %}
                    
                    <article class="stat-card">
                        <div class="stat-icon-large">üåç</div>
                        <p class="stat-title">Global CO‚ÇÇ Emissions</p>
                        <p class="stat-value">10%</p>
                        <p class="stat-unit">of global total</p>
                        <p class="stat-desc">Fashion accounts for more carbon emissions than international flights and maritime shipping combined.</p>
                        <p class="stat-source">Source: Quantis, 2018</p>
                    </article>
                    
                    <article class="stat-card">
                        <div class="stat-icon-large">üóëÔ∏è</div>
                        <p class="stat-title">Textile Waste Generated</p>
                        <p class="stat-value">92 million</p>
                        <p class="stat-unit">tons per year</p>
                        <p class="stat-desc">Equivalent to a garbage truck full of clothes being dumped in a landfill every second.</p>
                        <p class="stat-source">Source: Global Fashion Agenda, 2020</p>
                    </article>
                    
                    <article class="stat-card">
                        <div class="stat-icon-large">üåä</div>
                        <p class="stat-title">Microplastics Released</p>
                        <p class="stat-value">500,000</p>
                        <p class="stat-unit">tons per year</p>
                        <p class="stat-desc">From washing synthetic clothing, equivalent to 50 billion plastic bottles entering oceans annually.</p>
                        <p class="stat-source">Source: IUCN, 2017</p>
                    </article>
                    {% endfor %}
                </div>
        
                <div class="stats-context">
                    <h3 class="stats-context-title">Putting Numbers in Perspective</h3>
                    <div class="stats-context-grid">
                        <div class="context-item">
                            <h4>Individual Impact</h4>
                            <p>Producing a single cotton t-shirt requires approximately 2,700 liters of water‚Äîenough for one person to drink for 2.5 years. A pair of jeans can require up to 10,000 liters.</p>
            </div>
                        <div class="context-item">
                            <h4>Future Projections</h4>
                            <p>If current trends continue, by 2030 the fashion industry is projected to generate significantly more waste and emissions‚Äîhighlighting the urgent need for systemic change.</p>
                        </div>
                        <div class="context-item">
                            <h4>Global Comparison</h4>
                            <p>The fashion industry's carbon footprint is on track to exceed that of entire countries if no action is taken, making it one of the world's largest polluting industries.</p>
                        </div>
                    </div>
                </div>
        
                <p class="section-text" style="margin-top: 24px; font-size: 0.9rem; color: var(--text-muted);">
                    <strong>Note:</strong> These numbers come from public reports and industry analyses.
                    They show approximate scale, not exact predictions for every brand or garment.
                    Water use, emissions, and waste vary by region, production method, and year.
                </p>
            </div>
        </section>
        
        <!-- Problem Cards Grid -->
        <div class="problem-cards-scroll">
            <button class="problem-card-nav problem-card-nav-prev" aria-label="Previous card">‚Äπ</button>
            <button class="problem-card-nav problem-card-nav-next" aria-label="Next card">‚Ä∫</button>
            <div class="problem-cards-container">
                <div class="problem-card" data-card-index="0">
                    <div class="problem-card-image">
                        <img src="{% static 'impact/imgs/cotton-unsplash.jpg' %}" alt="Cotton field with irrigation">
                    </div>
                    <div class="problem-card-content">
                        <h3 class="problem-card-title">Excessive Water Usage</h3>
                        <p class="problem-card-text">
                    Cotton farming is one of the most water-intensive agricultural systems in the world, 
                    especially in dry regions where irrigation is required. On top of farming, dyeing, 
                            bleaching, and finishing fabrics use millions of liters of water each day.
                </p>
            </div>
                </div>
                
                <div class="problem-card">
                    <div class="problem-card-image">
                        <img src="{% static 'impact/imgs/polyester-unsplash.jpg' %}" alt="Textile factory production">
                    </div>
                    <div class="problem-card-content">
                        <h3 class="problem-card-title">Synthetic Fiber Explosion</h3>
                        <p class="problem-card-text">
                            The majority of global fiber production is now synthetic ‚Äî mainly polyester made 
                            from fossil fuels. These fibers carry significant environmental costs, including high energy use, 
                            carbon emissions, and long-lasting waste that persists for centuries.
                </p>
            </div>
                </div>
                
                <div class="problem-card">
                    <div class="problem-card-image">
                        <img src="{% static 'impact/imgs/clothing-warehouse.jpg' %}" alt="Clothing warehouse with massive inventory">
                    </div>
                    <div class="problem-card-content">
                        <h3 class="problem-card-title">Massive Overproduction</h3>
                        <p class="problem-card-text">
                            The fashion industry produces far more garments than the global population needs. 
                            This overproduction leads to massive waste, with most clothing being discarded within 
                            a year of purchase, creating an unsustainable cycle of consumption and disposal.
                </p>
            </div>
                </div>
                
                <div class="problem-card">
                    <div class="problem-card-image">
                        <img src="{% static 'impact/imgs/landfill.jpg' %}" alt="Textile waste in landfill">
                    </div>
                    <div class="problem-card-content">
                        <h3 class="problem-card-title">Landfill Crisis</h3>
                        <p class="problem-card-text">
                            The vast majority of discarded textiles end up in landfills or incinerators. Only a small 
                            portion is recycled, and most of that is downcycled into lower-quality materials. Synthetic clothes 
                            can take decades to centuries to break down, creating a long-term environmental burden.
                </p>
            </div>
                </div>
                
                <div class="problem-card" data-card-index="4">
                    <div class="problem-card-image">
                        <img src="{% static 'impact/imgs/beach-microplastics.jpg' %}" alt="Ocean pollution with plastic waste">
                    </div>
                    <div class="problem-card-content">
                        <h3 class="problem-card-title">Microplastic Pollution</h3>
                        <p class="problem-card-text">
                            Each load of laundry releases hundreds of thousands of tiny synthetic fibers into 
                            waterways. These microplastics have been found in oceans, soil, food, drinking water, 
                            and even human blood.
                        </p>
                    </div>
                </div>
                <!-- Duplicate first card for seamless loop -->
                <div class="problem-card problem-card-duplicate" data-card-index="0">
                    <div class="problem-card-image">
                        <img src="{% static 'impact/imgs/cotton-unsplash.jpg' %}" alt="Cotton field with irrigation">
                    </div>
                    <div class="problem-card-content">
                        <h3 class="problem-card-title">Excessive Water Usage</h3>
                        <p class="problem-card-text">
                    Cotton farming is one of the most water-intensive agricultural systems in the world, 
                    especially in dry regions where irrigation is required. On top of farming, dyeing, 
                            bleaching, and finishing fabrics use millions of liters of water each day.
                </p>
            </div>
                </div>
            </div>
        </div>
        
        <section class="section">
            <div class="section-inner">
                <h2 class="subheading">Material Impact Comparison</h2>
                <p class="section-text">
                    Compare the environmental impact of different materials. Hover over each bar to see detailed metrics. 
                    The numbers might surprise you.
                </p>
                
                <div class="interactive-chart">
                    <div class="chart-controls">
                        <button class="chart-btn active" data-metric="water">Water Usage</button>
                        <button class="chart-btn" data-metric="co2">CO‚ÇÇ Emissions</button>
                        <button class="chart-btn" data-metric="waste">Waste Impact</button>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-bars" id="material-chart">
                            <div class="chart-bar-wrapper" data-material="cotton">
                                <div class="chart-bar" data-value="10000" style="--bar-color: #2f6f4e;">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Cotton</div>
                                    <div class="bar-value">10,000L</div>
                                    <div class="bar-tooltip">
                                        <strong>Cotton</strong><br>
                                        Water: 10,000L/kg<br>
                                        CO‚ÇÇ: 15kg/kg<br>
                                        Most water-intensive
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chart-bar-wrapper" data-material="polyester">
                                <div class="chart-bar" data-value="2000" style="--bar-color: #d97757;">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Polyester</div>
                                    <div class="bar-value">2,000L</div>
                                    <div class="bar-tooltip">
                                        <strong>Polyester</strong><br>
                                        Water: 2,000L/kg<br>
                                        CO‚ÇÇ: 25kg/kg<br>
                                        Highest emissions
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chart-bar-wrapper" data-material="rayon">
                                <div class="chart-bar" data-value="6000" style="--bar-color: #95d5b2;">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Rayon</div>
                                    <div class="bar-value">6,000L</div>
                                    <div class="bar-tooltip">
                                        <strong>Rayon</strong><br>
                                        Water: 6,000L/kg<br>
                                        CO‚ÇÇ: 12kg/kg<br>
                                        Chemical-intensive
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chart-bar-wrapper" data-material="wool">
                                <div class="chart-bar" data-value="8000" style="--bar-color: #1f3f30;">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Wool</div>
                                    <div class="bar-value">8,000L</div>
                                    <div class="bar-tooltip">
                                        <strong>Wool</strong><br>
                                        Water: 8,000L/kg<br>
                                        CO‚ÇÇ: 18kg/kg<br>
                                        High methane emissions
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="chart-legend">
                            <p class="chart-note">* Per kilogram of fiber produced</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- MATERIAL DEEP DIVES SECTION -->
        <section id="materials" class="section section-materials section-anchor-offset">
            <div class="section-inner">
                <h2 class="section-heading">Understanding Materials</h2>
                <p class="section-text" style="text-align: center; max-width: 800px; margin: 0 auto 40px;">
                    Each textile material has unique environmental trade-offs. Understanding these can help you make more 
                    informed choices based on your priorities.
                </p>
                
                <div class="materials-grid">
                    <div class="material-card">
                        <div class="material-header">
                            <div class="material-icon">üå±</div>
                            <h3 class="material-name">Cotton</h3>
            </div>
                        <div class="material-stats">
                            <div class="material-stat">
                                <span class="stat-label">Water:</span>
                                <span class="stat-value high">Very High</span>
                            </div>
                            <div class="material-stat">
                                <span class="stat-label">CO‚ÇÇ:</span>
                                <span class="stat-value medium">Medium</span>
                            </div>
                            <div class="material-stat">
                                <span class="stat-label">Waste:</span>
                                <span class="stat-value low">Biodegradable</span>
                            </div>
                        </div>
                        <p class="material-description">
                            Conventional cotton is one of the most water-intensive crops, requiring 10,000+ liters per kg. 
                            However, it's natural, biodegradable, and can be grown organically. Organic cotton reduces water 
                            use by 91% and eliminates pesticides, but still requires significant resources.
                        </p>
                    </div>
                    
                    <div class="material-card">
                        <div class="material-header">
                            <div class="material-icon">üõ¢Ô∏è</div>
                            <h3 class="material-name">Polyester</h3>
                        </div>
                        <div class="material-stats">
                            <div class="material-stat">
                                <span class="stat-label">Water:</span>
                                <span class="stat-value low">Low</span>
                            </div>
                            <div class="material-stat">
                                <span class="stat-label">CO‚ÇÇ:</span>
                                <span class="stat-value high">Very High</span>
                            </div>
                            <div class="material-stat">
                                <span class="stat-label">Waste:</span>
                                <span class="stat-value high">Non-biodegradable</span>
                            </div>
                        </div>
                        <p class="material-description">
                            Made from petroleum, polyester requires less water but emits more CO‚ÇÇ and releases microplastics 
                            with every wash. It's durable and versatile, but takes 200+ years to decompose. Recycled polyester 
                            (rPET) reduces fossil fuel use by 50% but still sheds microplastics.
                </p>
            </div>
                    
                    <div class="material-card">
                        <div class="material-header">
                            <div class="material-icon">üåø</div>
                            <h3 class="material-name">Rayon</h3>
                        </div>
                        <div class="material-stats">
                            <div class="material-stat">
                                <span class="stat-label">Water:</span>
                                <span class="stat-value medium">Medium</span>
                            </div>
                            <div class="material-stat">
                                <span class="stat-label">CO‚ÇÇ:</span>
                                <span class="stat-value medium">Medium</span>
                            </div>
                            <div class="material-stat">
                                <span class="stat-label">Waste:</span>
                                <span class="stat-value medium">Biodegradable</span>
                            </div>
                        </div>
                        <p class="material-description">
                            Made from wood pulp, rayon is semi-synthetic. It requires significant chemical processing but 
                            uses less water than cotton. Production can contribute to deforestation if not sustainably sourced. 
                            Look for FSC-certified or TENCEL‚Ñ¢ (closed-loop production) versions.
                        </p>
                    </div>
                    
                    <div class="material-card">
                        <div class="material-header">
                            <div class="material-icon">üßµ</div>
                            <h3 class="material-name">Wool</h3>
                        </div>
                        <div class="material-stats">
                            <div class="material-stat">
                                <span class="stat-label">Water:</span>
                                <span class="stat-value medium">Medium</span>
                            </div>
                            <div class="material-stat">
                                <span class="stat-label">CO‚ÇÇ:</span>
                                <span class="stat-value high">High</span>
                            </div>
                            <div class="material-stat">
                                <span class="stat-label">Waste:</span>
                                <span class="stat-value low">Biodegradable</span>
                            </div>
                        </div>
                        <p class="material-description">
                            Natural and durable, wool can last decades with proper care. However, sheep farming produces 
                            methane (a potent greenhouse gas) and requires significant land. Ethical sourcing is important 
                            to ensure animal welfare. Recycled wool reduces these impacts significantly.
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="section alt">
            <div class="section-inner">
                <h2 class="subheading">The Fast Fashion Explosion</h2>
                <p class="section-text">
                    See how dramatically the fashion industry changed. The numbers tell a shocking story of growth and waste.
                </p>
                
                <div class="comparison-visual">
                    <div class="comparison-container">
                        <div class="comparison-item">
                            <div class="comparison-label">
                                <span class="comparison-year">1990s</span>
                                <span class="comparison-title">Before Fast Fashion</span>
                            </div>
                            <div class="comparison-bar-wrapper">
                                <div class="comparison-bar before" data-value="20">
                                    <div class="bar-fill-animated"></div>
                                    <div class="bar-text">20 billion garments/year</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="comparison-divider">
                            <div class="divider-line"></div>
                            <div class="divider-arrow">‚Üí</div>
                            <div class="divider-text">500% increase</div>
                </div>
                        
                        <div class="comparison-item">
                            <div class="comparison-label">
                                <span class="comparison-year">Today</span>
                                <span class="comparison-title">Fast Fashion Era</span>
                            </div>
                            <div class="comparison-bar-wrapper">
                                <div class="comparison-bar after" data-value="100">
                                    <div class="bar-fill-animated"></div>
                                    <div class="bar-text">100+ billion garments/year</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-stats">
                        <div class="comparison-stat-card">
                            <div class="stat-icon">üìà</div>
                            <div class="stat-number" data-target="500">0</div>
                            <div class="stat-label">% Production Increase</div>
                        </div>
                        <div class="comparison-stat-card">
                            <div class="stat-icon">‚è±Ô∏è</div>
                            <div class="stat-number" data-target="52">0</div>
                            <div class="stat-label">Collections Per Year</div>
                        </div>
                        <div class="comparison-stat-card">
                            <div class="stat-icon">üóëÔ∏è</div>
                            <div class="stat-number" data-target="92">0</div>
                            <div class="stat-label">Million Tons Waste/Year</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
            </div>
        </section>
<!-- INDUSTRY CONTEXT SECTION -->
<section id="context" class="section section-context section-anchor-offset">
            <div class="section-inner">
        <h2 class="section-heading">Industry Context</h2>
        <p class="section-text" style="text-align: center; max-width: 800px; margin: 0 auto 40px;">
            Understanding how we got here and the regional differences helps put the problem in perspective.
        </p>
        
        <div class="context-timeline">
            <div class="timeline-item">
                <div class="timeline-year">1990s</div>
                <div class="timeline-content">
                    <h3 class="timeline-title">Pre-Fast Fashion Era</h3>
                    <p class="timeline-text">
                        Fashion operated on seasonal collections (Spring/Summer, Fall/Winter). Garments were designed 
                        for durability, and consumers typically bought fewer, higher-quality items. Global production: 
                        ~20 billion garments per year.
                    </p>
            </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">2000s</div>
                <div class="timeline-content">
                    <h3 class="timeline-title">Fast Fashion Emerges</h3>
                    <p class="timeline-text">
                        Brands like Zara and H&M pioneered rapid production cycles, releasing new collections every 
                        few weeks. Production moved to low-cost regions. Consumers began buying more, wearing items 
                        fewer times. Production doubled to ~40 billion garments per year.
                    </p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">2010s</div>
                <div class="timeline-content">
                    <h3 class="timeline-title">Ultra-Fast Fashion</h3>
                    <p class="timeline-text">
                        Online retailers like Shein and Boohoo release thousands of new styles weekly. Social media 
                        drives constant demand for newness. Production accelerates dramatically. 
                        Clothing lifespan drops significantly, with items worn far fewer times before disposal.
                    </p>
            </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">Today</div>
                <div class="timeline-content">
                    <h3 class="timeline-title">The Current Reality</h3>
                    <p class="timeline-text">
                        The industry produces far more clothing than needed globally. 
                        Only a tiny fraction of clothing is recycled into new garments. Textile waste is growing much faster than 
                        population growth. However, awareness is increasing, and sustainable alternatives are emerging.
                    </p>
            </div>
            </div>
        </div>
        
        <div class="context-regions">
            <h3 class="context-subheading">Regional Differences</h3>
            <div class="regions-grid">
                <div class="region-card">
                    <h4 class="region-name">United States</h4>
                    <p class="region-text">
                        Average person buys 68 new garments per year. High consumption, high disposal rates. 
                        Only 15% of textiles are recycled.
                    </p>
            </div>
                <div class="region-card">
                    <h4 class="region-name">European Union</h4>
                    <p class="region-text">
                        More regulations on textile waste. Extended Producer Responsibility laws emerging. 
                        Average consumption: 26 garments per person per year.
                    </p>
                </div>
                <div class="region-card">
                    <h4 class="region-name">Asia</h4>
                    <p class="region-text">
                        Major production hub. Growing middle class increasing consumption. Some countries 
                        implementing circular economy initiatives.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- SOLUTIONS SECTION -->
<section id="solutions" class="section section-solutions section-anchor-offset">
    <div class="section-inner">
        <h2 class="section-heading">Solutions</h2>
        <p class="section-text" style="text-align: center; max-width: 800px; margin: 0 auto 40px;">
            Individuals aren't responsible for fixing the fashion system‚Äîbut we can still take
            actions that matter. Here are realistic steps that anyone can take, regardless of budget.
        </p>
        
        <!-- Fairness & Ethics Card -->
        <div class="ethics-card">
            <div class="ethics-icon">‚öñÔ∏è</div>
            <div class="ethics-content">
                <h3 class="ethics-title">Fairness & Ethics</h3>
                <p class="ethics-text">
                    Sustainability often costs more. Not everyone can afford slow fashion, sustainable
                    brands, or specialty materials. Any "solution" must respect budgets, needs, and access.
                    The most impactful actions‚Äîwearing clothes longer, buying second-hand, repairing‚Äîare 
                    often the most accessible.
                </p>
            </div>
        </div>
        
        <!-- Solutions Actions Grid -->
        <div class="solutions-grid">
            <div class="solution-card">
                <div class="solution-icon">üëï</div>
                <h3 class="solution-title">Buy Less, Wear Longer</h3>
                <p class="solution-text">
                    The single most impactful action: buy fewer new items and wear the ones you have longer. 
                    Extending clothing life by just 9 months can reduce environmental impact by 20-30%. 
                    This costs nothing and works for everyone.
                </p>
            </div>
            
            <div class="solution-card">
                <div class="solution-icon">‚ôªÔ∏è</div>
                <h3 class="solution-title">Second-Hand & Swaps</h3>
                <p class="solution-text">
                    When you need something new, try second-hand stores, online marketplaces, or clothing swaps. 
                    This extends the life of existing garments, reduces demand for new production, and is often 
                    more affordable than buying new.
                </p>
            </div>
            
            <div class="solution-card">
                <div class="solution-icon">üîß</div>
                <h3 class="solution-title">Repair & Maintain</h3>
                <p class="solution-text">
                    Repair small rips, missing buttons, or broken zippers instead of replacing clothes. 
                    Learn basic sewing skills or support local tailors. Simple repairs can extend a garment's 
                    lifespan by years.
                </p>
            </div>
            
            <div class="solution-card">
                <div class="solution-icon">üì¶</div>
                <h3 class="solution-title">Donate & Recycle Responsibly</h3>
                <p class="solution-text">
                    When clothes can't be worn anymore, donate to organizations that will use them, or find 
                    textile recycling programs. Keep clothes out of landfills and give them a second life. 
                    Research local options‚Äînot all "donations" end up being used.
                </p>
            </div>
            
            <div class="solution-card">
                <div class="solution-icon">üß†</div>
                <h3 class="solution-title">Make Informed Choices</h3>
                <p class="solution-text">
                    When buying new, consider material impact (see Materials section), brand transparency, 
                    and durability. Look for quality over quantity. One well-made item that lasts years 
                    beats multiple fast fashion pieces.
                </p>
            </div>
            
            <div class="solution-card">
                <div class="solution-icon">üí¨</div>
                <h3 class="solution-title">Spread Awareness</h3>
                <p class="solution-text">
                    Talk with friends and family about habits and sustainable options. Share what you've learned. 
                    Collective awareness and demand for better practices drives industry change. Your voice matters.
                </p>
            </div>
        </div>
        
        <div class="solutions-impact">
            <h3 class="solutions-impact-title">The Impact of Small Changes</h3>
            <p class="solutions-impact-text">
                If everyone in the U.S. extended the life of their clothes by just 9 months, it would save 
                the equivalent of removing 8 million cars from the road for a year. Small individual actions, 
                when multiplied by millions, create significant change.
            </p>
        </div>
            </div>
        </section>
        
<!-- RESOURCES & FURTHER READING SECTION -->
<section id="resources" class="section section-resources section-anchor-offset">
            <div class="section-inner">
        <h2 class="section-heading">Resources & Further Reading</h2>
        <p class="section-text" style="text-align: center; max-width: 800px; margin: 0 auto 40px;">
            Explore these organizations, guides, and platforms to learn more and take action.
        </p>
        
        <div class="resources-grid">
            <div class="resource-category">
                <h3 class="resource-category-title">Organizations</h3>
                <ul class="resource-list">
                    <li>
                        <a href="https://www.fashionrevolution.org" target="_blank" rel="noopener noreferrer">
                            <strong>Fashion Revolution</strong> ‚Äî Transparency and ethics in fashion
                        </a>
                    </li>
                    <li>
                        <a href="https://www.ellenmacarthurfoundation.org" target="_blank" rel="noopener noreferrer">
                            <strong>Ellen MacArthur Foundation</strong> ‚Äî Circular economy initiatives
                        </a>
                    </li>
                    <li>
                        <a href="https://goodonyou.eco" target="_blank" rel="noopener noreferrer">
                            <strong>Good On You</strong> ‚Äî Brand sustainability ratings
                        </a>
                    </li>
                    <li>
                        <a href="https://www.wrap.org.uk" target="_blank" rel="noopener noreferrer">
                            <strong>WRAP</strong> ‚Äî Waste reduction and resource efficiency
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="resource-category">
                <h3 class="resource-category-title">Shopping Alternatives</h3>
                <ul class="resource-list">
                    <li>
                        <strong>Second-Hand:</strong> ThredUp, Poshmark, Depop, local thrift stores
                    </li>
                    <li>
                        <strong>Rental:</strong> Rent the Runway, Nuuly, local rental services
                    </li>
                    <li>
                        <strong>Swapping:</strong> Clothing swap events, Swap.com, local community groups
                    </li>
                    <li>
                        <strong>Repair:</strong> Local tailors, online tutorials, repair cafes
                    </li>
                </ul>
            </div>
            
            <div class="resource-category">
                <h3 class="resource-category-title">Learning Resources</h3>
                <ul class="resource-list">
                    <li>
                        <a href="https://www.unep.org/news-and-stories/story/putting-brakes-fast-fashion" target="_blank" rel="noopener noreferrer">
                            <strong>UN Environment Programme</strong> ‚Äî Fast fashion reports
                        </a>
                    </li>
                    <li>
                        <a href="https://www.bbc.com/future/article/20200310-sustainable-fashion-how-to-buy-clothes-good-for-the-climate" target="_blank" rel="noopener noreferrer">
                            <strong>BBC Future</strong> ‚Äî Sustainable fashion guides
                        </a>
                    </li>
                    <li>
                        <strong>Documentaries:</strong> "The True Cost", "RiverBlue", "Fashion's Dirty Secrets"
                    </li>
                    <li>
                        <strong>Books:</strong> "Overdressed" by Elizabeth Cline, "Wardrobe Crisis" by Clare Press
                    </li>
                </ul>
            </div>
            
            <div class="resource-category">
                <h3 class="resource-category-title">Take Action</h3>
                <ul class="resource-list">
                    <li>Sign petitions for fashion industry transparency</li>
                    <li>Support brands with verified sustainability practices</li>
                    <li>Organize clothing swaps in your community</li>
                    <li>Contact brands asking about their supply chains</li>
                    <li>Share knowledge with friends and family</li>
                </ul>
            </div>
        </div>
            </div>
        </section>
        
<!-- FAQ SECTION -->
<section id="faq" class="section section-faq section-anchor-offset">
            <div class="section-inner">
        <h2 class="section-heading">Frequently Asked Questions</h2>
        
        <div class="faq-grid">
            <div class="faq-item">
                <h3 class="faq-question">How accurate are the calculator results?</h3>
                <p class="faq-answer">
                    The calculator uses industry averages and provides estimates within a reasonable range. Actual impacts 
                    can vary by 2-10x depending on brand, production location, and manufacturing methods. The results are 
                    meant to illustrate scale and help you understand relative impacts, not provide exact measurements.
                </p>
            </div>
            
            <div class="faq-item">
                <h3 class="faq-question">Why do the numbers seem so high?</h3>
                <p class="faq-answer">
                    Fashion is one of the most resource-intensive industries. A single cotton t-shirt can require 2,700 
                    liters of water from field to finished product. When you multiply this across billions of garments 
                    produced annually, the numbers become staggering. This is why even small reductions in consumption 
                    can have significant environmental benefits.
                </p>
            </div>
            
            <div class="faq-item">
                <h3 class="faq-question">What's the difference between cotton, polyester, and other materials?</h3>
                <p class="faq-answer">
                    Cotton is water-intensive but biodegradable. Polyester uses less water but requires fossil fuels and 
                    releases microplastics. Rayon falls in between. Each material has trade-offs. The best choice often 
                    depends on how long you'll wear the item and how you'll dispose of it.
                </p>
            </div>
            
            <div class="faq-item">
                <h3 class="faq-question">Can I really make a difference as an individual?</h3>
                <p class="faq-answer">
                    Yes! While systemic change is needed, individual actions add up. If everyone extended clothing life by 
                    9 months, it could reduce environmental impact by 20-30%. Your choices also signal demand to brands 
                    and can influence industry practices. Collective action drives change.
                </p>
            </div>
            
            <div class="faq-item">
                <h3 class="faq-question">What if I can't afford sustainable fashion?</h3>
                <p class="faq-answer">
                    Sustainability doesn't require buying expensive "eco" brands. The most sustainable option is often 
                    wearing what you already have longer, buying second-hand, or swapping with friends. These actions 
                    are accessible to most people and have significant environmental benefits.
                </p>
            </div>
            
            <div class="faq-item">
                <h3 class="faq-question">How often is the data updated?</h3>
                <p class="faq-answer">
                    We use data from recent peer-reviewed studies and industry reports (typically 2020-2024). Fashion 
                    industry data evolves slowly, so these estimates remain relevant. We update calculations when major 
                    new studies are published that significantly change our understanding of impacts.
                </p>
            </div>
        </div>
            </div>
        </section>

<!-- ABOUT / METHODOLOGY SECTION -->
<section id="about" class="section section-about section-anchor-offset">
    <div class="section-inner">
        <h2 class="section-heading">About This Project</h2>
        
        <div class="about-content">
            <div class="about-card">
                <div class="about-icon">üéØ</div>
                <h3 class="about-title">Our Mission</h3>
                <p class="about-text">
                    This project aims to make the environmental impact of fast fashion more tangible and understandable. 
                    By visualizing data and providing interactive tools, we hope to empower individuals to make more 
                    informed choices about their clothing consumption.
                </p>
            </div>
            
            <div class="about-card">
                <div class="about-icon">üìä</div>
                <h3 class="about-title">Methodology</h3>
                <p class="about-text">
                    Our calculations are based on industry averages from peer-reviewed studies and public reports. 
                    Impact values (water, CO‚ÇÇ, waste) are derived from life cycle assessments of textile production. 
                    The calculator uses average weights per garment type and material-specific impact factors.
                </p>
            </div>
            
            <div class="about-card">
                <div class="about-icon">‚ö†Ô∏è</div>
                <h3 class="about-title">Data Limitations</h3>
                <p class="about-text">
                    These numbers are estimates meant to illustrate scale, not exact predictions. Actual impacts vary 
                    significantly by brand, production region, manufacturing methods, and year. Water use, emissions, 
                    and waste can differ by 2-10x depending on these factors. We use conservative averages to provide 
                    meaningful comparisons.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- SOURCES / REFERENCES SECTION -->
<section id="sources" class="section section-sources section-anchor-offset">
    <div class="section-inner">
        <h2 class="section-heading">Sources</h2>
        <p class="section-text" style="text-align: center; max-width: 800px; margin: 0 auto 40px;">
                    These are the reports, articles, and datasets used to create the headline numbers
            and visuals on this site. All sources are publicly available and peer-reviewed where applicable.
        </p>
        
        <div class="sources-grid">
            <div class="source-category">
                <button class="source-category-toggle" aria-expanded="false">
                    <h3 class="source-category-title">Industry Reports & Foundations</h3>
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="source-category-content" style="display: none;">
                <ul class="source-list">
                    <li>
                        <strong>Ellen MacArthur Foundation</strong> (2017). "A New Textiles Economy: Redesigning Fashion's Future."
                        <a href="https://www.ellenmacarthurfoundation.org/publications/a-new-textiles-economy-redesigning-fashions-future" target="_blank" rel="noopener noreferrer">View Report</a>
                    </li>
                    <li>
                        <strong>Ellen MacArthur Foundation</strong> (2021). "Circular Economy in Fashion: Current State and Future Opportunities."
                    </li>
                    <li>
                        <strong>Textile Exchange</strong> (2023). "Material Change Index" and "Preferred Fiber & Materials Market Report."
                    </li>
                    <li>
                        <strong>WRAP</strong> (2020). "Valuing Our Clothes: The Cost of UK Fashion." Waste and Resources Action Programme.
                    </li>
                    <li>
                        <strong>Global Fashion Agenda & The Boston Consulting Group</strong> (2017-2023). "Pulse of the Fashion Industry" reports.
                    </li>
                </ul>
            </div>
            
            <div class="source-category">
                <button class="source-category-toggle" aria-expanded="false">
                    <h3 class="source-category-title">United Nations & International Organizations</h3>
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="source-category-content" style="display: none;">
                    <ul class="source-list">
                        <li>
                            <strong>UN Environment Programme</strong> (2019). "Putting the Brakes on Fast Fashion."
                            <a href="https://www.unep.org/news-and-stories/story/putting-brakes-fast-fashion" target="_blank" rel="noopener noreferrer">View Article</a>
                        </li>
                        <li>
                            <strong>UNECE</strong> (2018). "Fashion and the SDGs: What Role for the UN?"
                        </li>
                        <li>
                            <strong>International Labour Organization</strong> (2020). Reports on textile production and working conditions.
                        </li>
                        <li>
                            <strong>World Bank</strong> (2019). "Pollution in the Fashion Industry" data and analysis.
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="source-category">
                <button class="source-category-toggle" aria-expanded="false">
                    <h3 class="source-category-title">Water Usage & Material Impact</h3>
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="source-category-content" style="display: none;">
                    <ul class="source-list">
                        <li>
                            <strong>Chapagain, A.K. et al.</strong> (2006). "The Water Footprint of Cotton Consumption." 
                            <em>Ecological Economics</em>, 60(1), 186-203.
                        </li>
                        <li>
                            <strong>Muthu, S.S.</strong> (2014). "Assessing the Environmental Impact of Textiles and the Clothing Supply Chain." 
                            Woodhead Publishing.
                        </li>
                        <li>
                            <strong>Quantis</strong> (2018). "Measuring Fashion: Environmental Impact of the Global Apparel and Footwear Industries."
                        </li>
                        <li>
                            <strong>Water Footprint Network</strong> (2020). "Water Footprint Assessment: Cotton and Textile Production."
                        </li>
                        <li>
                            <strong>Higg Materials Sustainability Index</strong> (2023). Material impact data for cotton, polyester, rayon, and wool.
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="source-category">
                <button class="source-category-toggle" aria-expanded="false">
                    <h3 class="source-category-title">Carbon Emissions & Climate Impact</h3>
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="source-category-content" style="display: none;">
                    <ul class="source-list">
                        <li>
                            <strong>Quantis</strong> (2018). "Measuring Fashion: Climate Impact of the Global Apparel and Footwear Industries."
                        </li>
                        <li>
                            <strong>McKinsey & Company & Global Fashion Agenda</strong> (2020). "Fashion on Climate: How the Fashion Industry Can Urgently Act to Reduce Its Greenhouse Gas Emissions."
                        </li>
                        <li>
                            <strong>Carbon Trust</strong> (2011-2023). Life cycle assessment studies on textile materials.
                        </li>
                        <li>
                            <strong>IPCC</strong> (2021). "Climate Change 2021: The Physical Science Basis." Intergovernmental Panel on Climate Change.
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="source-category">
                <button class="source-category-toggle" aria-expanded="false">
                    <h3 class="source-category-title">Waste & Disposal Statistics</h3>
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="source-category-content" style="display: none;">
                    <ul class="source-list">
                        <li>
                            <strong>EPA</strong> (2021). "Textiles: Material-Specific Data." U.S. Environmental Protection Agency.
                            <a href="https://www.epa.gov/facts-and-figures-about-materials-waste-and-recycling/textiles-material-specific-data" target="_blank" rel="noopener noreferrer">View Data</a>
                        </li>
                        <li>
                            <strong>WRAP</strong> (2017). "Valuing Our Clothes: The True Cost of How We Design, Use and Dispose of Clothing in the UK."
                        </li>
                        <li>
                            <strong>Global Fashion Agenda</strong> (2020). "Fashion Industry Waste Statistics" and circularity reports.
                        </li>
                        <li>
                            <strong>Statista</strong> (2023). "Global Textile Waste Statistics" and production data.
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="source-category">
                <button class="source-category-toggle" aria-expanded="false">
                    <h3 class="source-category-title">Production & Industry Growth</h3>
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="source-category-content" style="display: none;">
                    <ul class="source-list">
                        <li>
                            <strong>McKinsey & Company</strong> (2016). "The State of Fashion" annual reports.
                        </li>
                        <li>
                            <strong>Common Objective</strong> (2020). "Fashion Industry Statistics: The Biggest, Most Shocking, Most Wasteful and Most Disruptive Stats on Fashion."
                        </li>
                        <li>
                            <strong>Fashion Revolution</strong> (2018-2023). "Fashion Transparency Index" and industry analysis.
                        </li>
                        <li>
                            <strong>Business of Fashion & McKinsey</strong> (2017-2023). "The State of Fashion" reports on production volumes and trends.
                        </li>
                    </ul>
                </div>
            </div>
            </div>
            
            <div class="source-category">
                <button class="source-category-toggle" aria-expanded="false">
                    <h3 class="source-category-title">Microplastics & Synthetic Fibers</h3>
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="source-category-content" style="display: none;">
                    <ul class="source-list">
                    <li>
                        <strong>Browne, M.A. et al.</strong> (2011). "Accumulation of Microplastic on Shorelines Worldwide: Sources and Sinks." 
                        <em>Environmental Science & Technology</em>, 45(21), 9175-9179.
                    </li>
                    <li>
                        <strong>IUCN</strong> (2017). "Primary Microplastics in the Oceans: A Global Evaluation of Sources."
                    </li>
                    <li>
                        <strong>Napper, I.E. & Thompson, R.C.</strong> (2016). "Release of Synthetic Microplastic Fibres from Domestic Washing Machines." 
                        <em>Marine Pollution Bulletin</em>, 112(1-2), 39-45.
                    </li>
                    <li>
                        <strong>Ocean Clean Wash</strong> (2017). Reports on microfiber pollution from synthetic textiles.
                    </li>
                </ul>
            </div>
            
            <div class="source-category">
                <button class="source-category-toggle" aria-expanded="false">
                    <h3 class="source-category-title">Consumer Behavior & Solutions</h3>
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="source-category-content" style="display: none;">
                    <ul class="source-list">
                        <li>
                            <strong>WRAP</strong> (2012). "Valuing Our Clothes: The Evidence Base." Study on extending clothing life.
                        </li>
                        <li>
                            <strong>Fletcher, K.</strong> (2014). "Sustainable Fashion and Textiles: Design Journeys." Routledge.
                        </li>
                        <li>
                            <strong>Cline, E.L.</strong> (2012). "Overdressed: The Shockingly High Cost of Cheap Fashion." Portfolio/Penguin.
                        </li>
                        <li>
                            <strong>Niinim√§ki, K. et al.</strong> (2020). "The Environmental Price of Fast Fashion." 
                            <em>Nature Reviews Earth & Environment</em>, 1, 189-200.
                        </li>
                    </ul>
                </div>
            </div>
            </div>
        </div>
        
        <div class="sources-note">
            <p><strong>Note on Data:</strong> Statistics are compiled from multiple sources and represent industry averages. 
            Actual values vary significantly by region, brand, production method, and year. Water usage figures are based 
            on life cycle assessments (LCA) and include all stages from raw material to finished product. CO‚ÇÇ emissions 
            include production, transportation, and end-of-life impacts. Waste statistics reflect global averages and may 
            differ by country based on recycling infrastructure and consumer behavior.</p>
        </div>
    </div>
</section>
<script>
    function setYearProgress() {
        const now = new Date();
    
        // Start of this year (Jan 1, 00:00)
        const startOfYear = new Date(now.getFullYear(), 0, 1);
    
        // Start of next year (Jan 1 next year, 00:00)
        const startOfNextYear = new Date(now.getFullYear() + 1, 0, 1);
    
        const elapsedMs = now - startOfYear;
        const totalMs = startOfNextYear - startOfYear;
    
        let progress = (elapsedMs / totalMs) * 100;
    
        console.log("Year progress = ", progress);  // debug
    
        // Clamp to 0‚Äì100
        if (progress < 0) progress = 0;
        if (progress > 100) progress = 100;
    
        // Write into the CSS variable on :root (html element)
        document.documentElement.style.setProperty("--water-progress", progress);
    }
    
    // Run once when the page is ready
    document.addEventListener("DOMContentLoaded", setYearProgress);
    
    // Collapsible sources functionality
    document.addEventListener("DOMContentLoaded", function() {
        const sourceToggles = document.querySelectorAll('.source-category-toggle');
        
        sourceToggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                const content = this.nextElementSibling;
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                const icon = this.querySelector('.toggle-icon');
                
                if (isExpanded) {
                    content.style.display = 'none';
                    this.setAttribute('aria-expanded', 'false');
                    icon.textContent = '‚ñº';
                    this.classList.remove('expanded');
                } else {
                    content.style.display = 'block';
                    this.setAttribute('aria-expanded', 'true');
                    icon.textContent = '‚ñ≤';
                    this.classList.add('expanded');
                }
            });
        });
    });
    </script>

<script>
    // Personal Impact Calculator
    document.addEventListener("DOMContentLoaded", function() {
        const calculateBtn = document.getElementById("calculate-btn");
        const itemsInput = document.getElementById("items-per-year");
        const materialSelect = document.getElementById("material-type");
        const resultsDiv = document.getElementById("calculator-results");
        
        // Mode toggle
        const modeButtons = document.querySelectorAll('.calc-mode-btn');
        const simpleMode = document.getElementById('simple-mode');
        const detailedMode = document.getElementById('detailed-mode');
        
        modeButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                const mode = this.dataset.mode;
                modeButtons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                if (mode === 'simple') {
                    simpleMode.classList.add('active');
                    detailedMode.classList.remove('active');
                } else {
                    simpleMode.classList.remove('active');
                    detailedMode.classList.add('active');
                }
            });
        });
        
        // Impact data per item (approximate averages in kg)
        const impactData = {
            cotton: {
                water: 10000,      // liters per kg (cotton is very water-intensive)
                co2: 15,           // kg CO2 per kg
                waste: 0.5         // kg waste per item (average)
            },
            polyester: {
                water: 2000,       // liters per kg (less water, but more energy)
                co2: 25,           // kg CO2 per kg (higher due to fossil fuels)
                waste: 0.5
            },
            rayon: {
                water: 6000,       // liters per kg
                co2: 12,           // kg CO2 per kg
                waste: 0.5
            },
            mixed: {
                water: 6000,       // average
                co2: 17,           // average
                waste: 0.5
            }
        };
        
        // Average weight per clothing item type (kg)
        const itemWeights = {
            shirts: 0.2,      // 200g average
            pants: 0.5,       // 500g average
            dresses: 0.4,    // 400g average
            shoes: 0.8,      // 800g average
            outerwear: 0.7,  // 700g average
            accessories: 0.15 // 150g average
        };
        
        // Average weight per clothing item (kg) - for simple mode
        const avgItemWeight = 0.3; // 300g average per item
        
        // Average person buys 25 items per year
        const averageItemsPerYear = 25;
        
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + "M";
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + "k";
            }
            return Math.round(num).toLocaleString();
        }
        
        function animateValue(element, start, end, duration, formatFunc) {
            const startTime = performance.now();
            const isDecimal = end % 1 !== 0;
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function for smooth animation
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const current = start + (end - start) * easeOutQuart;
                
                if (isDecimal || end < 1000) {
                    element.textContent = formatFunc(current);
                } else {
                    element.textContent = formatFunc(Math.round(current));
                }
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    // Ensure final value is exact
                    element.textContent = formatFunc(end);
                }
            }
            
            requestAnimationFrame(update);
        }
        
        function calculateImpact() {
            let items = 0;
            let totalWeight = 0;
            let material = '';
            
            // Check which mode is active
            const isDetailed = detailedMode.classList.contains('active');
            
            if (isDetailed) {
                // Detailed mode: calculate from item breakdown
                const itemTypes = ['shirts', 'pants', 'dresses', 'shoes', 'outerwear', 'accessories'];
                material = document.getElementById('material-type-detailed').value;
                
                itemTypes.forEach(type => {
                    const count = parseInt(document.getElementById(type).value) || 0;
                    items += count;
                    totalWeight += count * itemWeights[type];
                });
            } else {
                // Simple mode
                items = parseInt(itemsInput.value) || 0;
                material = materialSelect.value;
                totalWeight = items * avgItemWeight;
            }
            
            if (items <= 0) {
                alert("Please enter a valid number of items.");
                return;
            }
            
            const data = impactData[material];
            
            // Calculate impacts
            const waterLiters = totalWeight * data.water;
            const co2Kg = totalWeight * data.co2;
            const wasteKg = items * data.waste;
            
            // Calculate average person's impact for comparison
            const avgWeight = averageItemsPerYear * avgItemWeight;
            const avgWater = avgWeight * data.water;
            const avgCo2 = avgWeight * data.co2;
            const avgWaste = averageItemsPerYear * data.waste;
            
            // Show results first
            resultsDiv.style.display = "block";
            resultsDiv.scrollIntoView({ behavior: "smooth", block: "nearest" });
            
            // Reset to 0 first
            document.getElementById("water-result").textContent = "0";
            document.getElementById("co2-result").textContent = "0";
            document.getElementById("waste-result").textContent = "0";
            
            // Animate values counting up
            const animationDuration = 2000; // 2 seconds
            
            animateValue(
                document.getElementById("water-result"),
                0,
                waterLiters,
                animationDuration,
                formatNumber
            );
            
            animateValue(
                document.getElementById("co2-result"),
                0,
                co2Kg,
                animationDuration,
                formatNumber
            );
            
            animateValue(
                document.getElementById("waste-result"),
                0,
                wasteKg,
                animationDuration,
                formatNumber
            );
            
            // Add comparisons and average comparison
            setTimeout(() => {
                const bathtubs = Math.round(waterLiters / 150);
                document.getElementById("water-comparison").textContent = 
                    `‚âà ${bathtubs} bathtubs of water`;
                
                const carMiles = Math.round(co2Kg / 0.4); // ~0.4 kg CO2 per mile
                document.getElementById("co2-comparison").textContent = 
                    `‚âà ${carMiles} miles driven`;
                
                const trashBags = Math.round(wasteKg / 2); // ~2 kg per trash bag
                document.getElementById("waste-comparison").textContent = 
                    `‚âà ${trashBags} trash bags`;
                
                // Show comparison to average
                const comparisonBanner = document.getElementById('comparison-banner');
                const comparisonDetails = document.getElementById('comparison-details');
                
                // Check if dark mode is active
                const isDarkMode = document.documentElement.getAttribute('data-theme') === 'dark';
                
                const percentDiff = ((items - averageItemsPerYear) / averageItemsPerYear * 100).toFixed(0);
                const absPercent = Math.abs(percentDiff);
                
                if (items > averageItemsPerYear) {
                    comparisonDetails.textContent = `You buy ${absPercent}% more items than average. Reducing by ${Math.round(items - averageItemsPerYear)} items could save ${formatNumber((items - averageItemsPerYear) * avgItemWeight * data.water)}L of water.`;
                    if (isDarkMode) {
                        comparisonBanner.style.background = 'linear-gradient(135deg, #3d2a2a 0%, #4a2f2f 100%)';
                        comparisonBanner.style.borderColor = 'rgba(255, 87, 87, 0.3)';
                    } else {
                        comparisonBanner.style.background = 'linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%)';
                        comparisonBanner.style.borderColor = '';
                    }
                } else if (items < averageItemsPerYear) {
                    comparisonDetails.textContent = `You buy ${absPercent}% fewer items than average. Great job! You're saving ${formatNumber((averageItemsPerYear - items) * avgItemWeight * data.water)}L of water compared to average.`;
                    if (isDarkMode) {
                        comparisonBanner.style.background = 'linear-gradient(135deg, #2a3d2a 0%, #2f4a2f 100%)';
                        comparisonBanner.style.borderColor = 'rgba(74, 157, 122, 0.5)';
                    } else {
                        comparisonBanner.style.background = 'linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%)';
                        comparisonBanner.style.borderColor = '';
                    }
                } else {
                    comparisonDetails.textContent = `You're right at the average! Consider reducing by a few items to make an even bigger impact.`;
                    if (isDarkMode) {
                        comparisonBanner.style.background = 'linear-gradient(135deg, #3d3d2a 0%, #4a4a2f 100%)';
                        comparisonBanner.style.borderColor = 'rgba(255, 193, 7, 0.3)';
                    } else {
                        comparisonBanner.style.background = 'linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%)';
                        comparisonBanner.style.borderColor = '';
                    }
                }
                
                comparisonBanner.style.display = 'flex';
            }, animationDuration);
        }
        
        calculateBtn.addEventListener("click", calculateImpact);
        
        // Allow Enter key to calculate
        itemsInput.addEventListener("keypress", function(e) {
            if (e.key === "Enter") {
                calculateImpact();
            }
        });
    });
</script>

<script>
    // Interactive Material Chart
    document.addEventListener("DOMContentLoaded", function() {
        const chartBtns = document.querySelectorAll(".chart-btn");
        const chartBars = document.querySelectorAll(".chart-bar");
        
        // Chart data for different metrics
        const chartData = {
            water: {
                cotton: 10000,
                polyester: 2000,
                rayon: 6000,
                wool: 8000,
                labels: { cotton: "10,000L", polyester: "2,000L", rayon: "6,000L", wool: "8,000L" },
                tooltips: {
                    cotton: "<strong>Cotton</strong><br>Water: 10,000L/kg<br>CO‚ÇÇ: 15kg/kg<br>Most water-intensive",
                    polyester: "<strong>Polyester</strong><br>Water: 2,000L/kg<br>CO‚ÇÇ: 25kg/kg<br>Highest emissions",
                    rayon: "<strong>Rayon</strong><br>Water: 6,000L/kg<br>CO‚ÇÇ: 12kg/kg<br>Chemical-intensive",
                    wool: "<strong>Wool</strong><br>Water: 8,000L/kg<br>CO‚ÇÇ: 18kg/kg<br>High methane emissions"
                }
            },
            co2: {
                cotton: 15,
                polyester: 25,
                rayon: 12,
                wool: 18,
                labels: { cotton: "15kg", polyester: "25kg", rayon: "12kg", wool: "18kg" },
                tooltips: {
                    cotton: "<strong>Cotton</strong><br>Water: 10,000L/kg<br>CO‚ÇÇ: 15kg/kg<br>Most water-intensive",
                    polyester: "<strong>Polyester</strong><br>Water: 2,000L/kg<br>CO‚ÇÇ: 25kg/kg<br>Highest emissions",
                    rayon: "<strong>Rayon</strong><br>Water: 6,000L/kg<br>CO‚ÇÇ: 12kg/kg<br>Chemical-intensive",
                    wool: "<strong>Wool</strong><br>Water: 8,000L/kg<br>CO‚ÇÇ: 18kg/kg<br>High methane emissions"
                }
            },
            waste: {
                cotton: 0.5,
                polyester: 0.8,
                rayon: 0.6,
                wool: 0.4,
                labels: { cotton: "0.5kg", polyester: "0.8kg", rayon: "0.6kg", wool: "0.4kg" },
                tooltips: {
                    cotton: "<strong>Cotton</strong><br>Biodegradable<br>Waste: 0.5kg/item<br>Takes 1-5 months",
                    polyester: "<strong>Polyester</strong><br>Non-biodegradable<br>Waste: 0.8kg/item<br>Takes 200+ years",
                    rayon: "<strong>Rayon</strong><br>Partially biodegradable<br>Waste: 0.6kg/item<br>Chemical waste",
                    wool: "<strong>Wool</strong><br>Biodegradable<br>Waste: 0.4kg/item<br>Takes 1-5 years"
                }
            }
        };
        
        // Animate bars on load
        function animateBars(metric) {
            const data = chartData[metric];
            const maxValue = Math.max(...Object.values(data).filter(v => typeof v === 'number'));
            const chartContainer = document.querySelector('.chart-bars');
            const containerHeight = chartContainer ? chartContainer.offsetHeight - 100 : 300;
            
            chartBars.forEach((bar, index) => {
                const material = bar.closest('.chart-bar-wrapper').dataset.material;
                const value = data[material];
                const percentage = (value / maxValue) * 100;
                const height = (containerHeight * percentage) / 100;
                
                const fill = bar.querySelector('.bar-fill');
                const valueEl = bar.querySelector('.bar-value');
                const tooltip = bar.querySelector('.bar-tooltip');
                
                // Reset and animate height
                fill.style.height = '0px';
                setTimeout(() => {
                    fill.style.height = height + 'px';
                }, index * 100);
                
                // Update value
                valueEl.textContent = data.labels[material];
                
                // Update tooltip
                if (tooltip) {
                    tooltip.innerHTML = data.tooltips[material];
                }
            });
        }
        
        // Switch metrics
        chartBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                chartBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                animateBars(this.dataset.metric);
            });
        });
        
        // Initial animation
        setTimeout(() => {
            animateBars('water');
        }, 500);
    });
    
    // Before/After Comparison Animation
    document.addEventListener("DOMContentLoaded", function() {
        const beforeBar = document.querySelector('.comparison-bar.before .bar-fill-animated');
        const afterBar = document.querySelector('.comparison-bar.after .bar-fill-animated');
        const statNumbers = document.querySelectorAll('.comparison-stat-card .stat-number');
        
        // Animate bars
        function animateComparison() {
            if (beforeBar) {
                beforeBar.style.width = '20%';
            }
            if (afterBar) {
                setTimeout(() => {
                    afterBar.style.width = '100%';
                }, 300);
            }
            
            // Animate stat numbers
            statNumbers.forEach(stat => {
                const target = parseInt(stat.dataset.target);
                let current = 0;
                const increment = target / 60;
                const duration = 2000;
                const stepTime = duration / 60;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    stat.textContent = Math.round(current) + (target >= 100 ? '' : '%');
                }, stepTime);
            });
        }
        
        // Trigger animation when section is visible
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateComparison();
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.3 });
        
        const comparisonSection = document.querySelector('.comparison-visual');
        if (comparisonSection) {
            observer.observe(comparisonSection);
        }
    });
    </script>
    
<script>
    // Auto-scroll problem cards perpetually - one card at a time
    document.addEventListener("DOMContentLoaded", function() {
        const scrollContainer = document.querySelector('.problem-cards-scroll');
        const cardsContainer = document.querySelector('.problem-cards-container');
        const cards = document.querySelectorAll('.problem-card');
        const prevButton = document.querySelector('.problem-card-nav-prev');
        const nextButton = document.querySelector('.problem-card-nav-next');
        
        if (!scrollContainer || !cardsContainer || cards.length === 0) return;
        
        let currentIndex = 0;
        let scrollInterval = null;
        let resumeTimeout = null; // Timer to resume auto-scroll after manual navigation
        let autoScrollEnabled = true; // Flag to track if auto-scroll should continue
        const gap = 24; // gap between cards
        const scrollDuration = 5000; // time to show each card (ms) - slower for reading
        const resumeDelay = 60000; // Resume auto-scroll after 1 minute (60 seconds)
        
        function updateCardSizes() {
            const containerWidth = scrollContainer.offsetWidth;
            const allCards = document.querySelectorAll('.problem-card');
            
            // Set each card width to match container width (including duplicate)
            allCards.forEach(card => {
                card.style.width = `${containerWidth}px`;
            });
            
            // Set container width to accommodate all cards including duplicate
            const totalWidth = allCards.length * containerWidth + (allCards.length - 1) * gap;
            cardsContainer.style.width = `${totalWidth}px`;
        }
        
        function scrollToCard(index, userInitiated = false) {
            const containerWidth = scrollContainer.offsetWidth;
            let actualIndex = index;
            
            // Handle seamless loop for manual navigation
            if (userInitiated) {
                if (index >= cards.length) {
                    // If going past last card, scroll to duplicate then reset
                    actualIndex = cards.length; // Show duplicate
                    const translateX = -actualIndex * (containerWidth + gap);
                    cardsContainer.style.transform = `translateX(${translateX}px)`;
                    
                    // After transition, instantly reset to first card
                    setTimeout(() => {
                        cardsContainer.style.transition = 'none';
                        actualIndex = 0;
                        cardsContainer.style.transform = `translateX(0px)`;
                        setTimeout(() => {
                            cardsContainer.style.transition = 'transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                        }, 50);
                    }, 600); // Wait for transition to complete
                } else if (index < 0) {
                    // If going before first card, show last card
                    actualIndex = cards.length - 1;
                }
            }
            
            const translateX = -actualIndex * (containerWidth + gap);
            cardsContainer.style.transform = `translateX(${translateX}px)`;
            currentIndex = actualIndex;
            
            // If user manually navigated, pause auto-scroll and set resume timer
            if (userInitiated) {
                stopAutoScroll();
                clearTimeout(resumeTimeout);
                
                // Resume auto-scroll after 1 minute
                resumeTimeout = setTimeout(() => {
                    autoScrollEnabled = true;
                    startAutoScroll();
                }, resumeDelay);
            }
        }
        
        function startAutoScroll() {
            if (scrollInterval || !autoScrollEnabled) return;
            
            scrollInterval = setInterval(() => {
                currentIndex++;
                const containerWidth = scrollContainer.offsetWidth;
                
                // If we've reached the duplicate card (last card + 1), seamlessly reset to first card
                if (currentIndex >= cards.length) {
                    // Scroll to duplicate first card (which looks identical) with transition
                    const translateX = -cards.length * (containerWidth + gap);
                    cardsContainer.style.transform = `translateX(${translateX}px)`;
                    
                    // Reset to real first card during transition, then immediately continue to second card
                    // This creates a seamless infinite loop with no visible pause
                    setTimeout(() => {
                        // Disable transition for instant reset
                        cardsContainer.style.transition = 'none';
                        currentIndex = 1; // Skip index 0, go directly to 1 to avoid pause
                        cardsContainer.style.transform = `translateX(${-1 * (containerWidth + gap)}px)`;
                        
                        // Re-enable transition for smooth scrolling
                        requestAnimationFrame(() => {
                            cardsContainer.style.transition = 'transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                        });
                    }, 600); // Reset after transition to duplicate completes
                } else {
                    // Normal scroll to next card
                    const translateX = -currentIndex * (containerWidth + gap);
                    cardsContainer.style.transform = `translateX(${translateX}px)`;
                }
            }, scrollDuration);
        }
        
        function stopAutoScroll() {
            if (scrollInterval) {
                clearInterval(scrollInterval);
                scrollInterval = null;
            }
        }
        
        function goToNext() {
            let nextIndex = currentIndex + 1;
            scrollToCard(nextIndex, true);
        }
        
        function goToPrev() {
            let prevIndex = currentIndex - 1;
            scrollToCard(prevIndex, true);
        }
        
        // Navigation button handlers
        if (nextButton) {
            nextButton.addEventListener('click', goToNext);
        }
        
        if (prevButton) {
            prevButton.addEventListener('click', goToPrev);
        }
        
        // Initialize card sizes
        updateCardSizes();
        scrollToCard(0);
        
        // Start scrolling automatically
        startAutoScroll();
        
        // Handle window resize
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                updateCardSizes();
                scrollToCard(currentIndex);
            }, 250);
        });
    });
    </script>
    
{% endblock %}
