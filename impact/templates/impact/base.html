{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Fast Fashion Cleanup{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Styles -->
    <link rel="stylesheet" href="{% static 'impact/styles.css' %}">
</head>
<body>

<header class="header">
    <div class="header-inner">
        <a href="{% url 'home' %}" class="logo-container">
            <div class="logo-circle">FF</div>
            <div class="logo-text">Fast Fashion Cleanup</div>
        </a>

        <nav class="nav">
            <a href="{% url 'home' %}">Home</a>
            <a href="{% url 'problem' %}">The Problem</a>
            <a href="{% url 'solutions' %}">Solutions</a>
            <a href="{% url 'sources' %}">Sources</a>
        </nav>

        <a href="{% url 'problem' %}" class="nav-cta">View Data</a>
    </div>
</header>

<main class="main">
    {% block content %}{% endblock %}
</main>

<footer class="footer">
    <div class="footer-inner">
        <p class="footer-title">Fast Fashion Cleanup</p>
        <p class="footer-desc">
            A student project visualizing the environmental impact of fast fashion materials.
        </p>
        <p class="footer-small">
            Data is sourced from public reports and may not reflect differences between brands,
            regions, or newer innovations in textile production.
        </p>
    </div>
</footer>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const litersEl    = document.getElementById("waterYearLitersDisplay");
    const tubsEl      = document.getElementById("waterYearBathtubsDisplay");
    const bottlesEl   = document.getElementById("waterYearBottlesDisplay");

    if (!litersEl || !tubsEl || !bottlesEl) return;

    const LITERS_PER_SECOND        = 2.95e6;  // â‰ˆ 2.95 million liters/second
    const LITERS_PER_BATHTUB       = 150;
    const LITERS_PER_BILLION_BOTTLES = 1e9;

    const now       = new Date();
    const yearStart = new Date(now.getFullYear(), 0, 1);

    function update() {
        const current        = new Date();
        const elapsedSeconds = (current - yearStart) / 1000.0;

        const totalLiters         = Math.floor(elapsedSeconds * LITERS_PER_SECOND);
        const totalBathtubs       = Math.floor(totalLiters / LITERS_PER_BATHTUB);
        const totalBillionBottles = totalLiters / LITERS_PER_BILLION_BOTTLES;

        litersEl.textContent  = totalLiters.toLocaleString();
        tubsEl.textContent    = totalBathtubs.toLocaleString();
        bottlesEl.textContent = totalBillionBottles.toFixed(1);

        requestAnimationFrame(update);
    }

    update();
});
</script>

</body>
</html>
